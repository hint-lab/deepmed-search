# Deep Research Tools åŠŸèƒ½åˆ†æ

## ğŸ“Š å·¥å…·åˆ†ç±»å’Œä½¿ç”¨çŠ¶æ€

### âœ… æ ¸å¿ƒå·¥å…·ï¼ˆæ­£åœ¨ä½¿ç”¨ï¼‰

| å·¥å…·æ–‡ä»¶ | åŠŸèƒ½ | ä½¿ç”¨åœºæ™¯ | çŠ¶æ€ |
|---------|------|---------|------|
| `jina-dedup.ts` | **è¯­ä¹‰å»é‡** - ä½¿ç”¨ Jina Embeddings è¿›è¡Œè¯­ä¹‰ç›¸ä¼¼åº¦æ£€æµ‹ | search/reflect actions ä¸­é¿å…é‡å¤æŸ¥è¯¢ | âœ… ä½¿ç”¨ä¸­ |
| `jina-rerank.ts` | **ç»“æœé‡æ’åº** - ä½¿ç”¨ Jina Reranker å¯¹æœç´¢ç»“æœæŒ‰ç›¸å…³æ€§æ’åº | æœç´¢ç»“æœä¼˜åŒ– | âœ… ä½¿ç”¨ä¸­ |
| `jina-search.ts` | **äº’è”ç½‘æœç´¢** - ä½¿ç”¨ Jina Search API è¿›è¡Œç½‘é¡µæœç´¢ | search action çš„ä¸»è¦æœç´¢å¼•æ“ | âœ… ä½¿ç”¨ä¸­ |
| `jina-latechunk.ts` | **æ™ºèƒ½æ–‡æœ¬æå–** - ä½¿ç”¨ late chunking æŠ€æœ¯æå–æœ€ç›¸å…³çš„æ–‡æœ¬ç‰‡æ®µ | å¤„ç†é•¿ç½‘é¡µå†…å®¹æ—¶æå–å…³é”®ä¿¡æ¯ | âœ… ä½¿ç”¨ä¸­ |
| `jina-classify-spam.ts` | **åƒåœ¾å†…å®¹è¿‡æ»¤** - ä½¿ç”¨ Jina Classifier è¯†åˆ«åƒåœ¾å†…å®¹ | è¿‡æ»¤ä½è´¨é‡æœç´¢ç»“æœ | âœ… ä½¿ç”¨ä¸­ |
| `jina-read.ts` | **ç½‘é¡µè¯»å–** - ä½¿ç”¨ Jina Reader API æå–ç½‘é¡µç»“æ„åŒ–å†…å®¹ | visit action çš„æ ¸å¿ƒåŠŸèƒ½ | âœ… ä½¿ç”¨ä¸­ |
| `jina-segment.ts` | **æ–‡æœ¬åˆ†æ®µ** - ä½¿ç”¨ Jina Segment API å°†é•¿æ–‡æœ¬åˆ†å‰²æˆè¯­ä¹‰å— | ç­”æ¡ˆå¼•ç”¨æ„å»ºã€æ–‡æœ¬åˆ†æ | âœ… ä½¿ç”¨ä¸­ |
| `jina-embeddings.ts` | **å‘é‡åµŒå…¥** - ä½¿ç”¨ Jina Embeddings API ç”Ÿæˆæ–‡æœ¬å‘é‡ | è¯­ä¹‰ç›¸ä¼¼åº¦è®¡ç®—ã€å»é‡ã€æ’åº | âœ… ä½¿ç”¨ä¸­ |
| `build-ref.ts` | **å¼•ç”¨æ„å»º** - ä¸ºç­”æ¡ˆæ„å»ºå¼•ç”¨æ ‡æ³¨ï¼ˆ[^1], [^2]ï¼‰ | ç­”æ¡ˆç”Ÿæˆåæ·»åŠ å¼•ç”¨ | âœ… ä½¿ç”¨ä¸­ |
| `cosine.ts` | **ç›¸ä¼¼åº¦è®¡ç®—** - ä½™å¼¦ç›¸ä¼¼åº¦å’Œ Jaccard ç›¸ä¼¼åº¦ | å‘é‡ç›¸ä¼¼åº¦è®¡ç®—çš„åŸºç¡€å·¥å…· | âœ… ä½¿ç”¨ä¸­ |
| `evaluator.ts` | **ç­”æ¡ˆè¯„ä¼°** - å¤šç»´åº¦è¯„ä¼°ç­”æ¡ˆè´¨é‡ | answer action çš„è¯„ä¼°ç¯èŠ‚ | âœ… ä½¿ç”¨ä¸­ |
| `error-analyzer.ts` | **é”™è¯¯åˆ†æ** - åˆ†æå¤±è´¥æ­¥éª¤å¹¶æä¾›æ”¹è¿›å»ºè®® | ç­”æ¡ˆè¯„ä¼°å¤±è´¥åçš„åæ€ | âœ… ä½¿ç”¨ä¸­ |
| `query-rewriter.ts` | **æŸ¥è¯¢é‡å†™** - ä½¿ç”¨ LLM ä¼˜åŒ–å’Œæ‰©å±•æœç´¢æŸ¥è¯¢ | search action çš„æŸ¥è¯¢ä¼˜åŒ– | âœ… ä½¿ç”¨ä¸­ |
| `validator.ts` | **ç­”æ¡ˆéªŒè¯** - åŸºç¡€è¯­ä¹‰éªŒè¯ï¼Œæ‹¦æˆªæ— æ•ˆç­”æ¡ˆ | ç­”æ¡ˆç”Ÿæˆåçš„å¿«é€ŸéªŒè¯ | âœ… ä½¿ç”¨ä¸­ |
| `broken-ch-fixer.ts` | **ä¹±ç ä¿®å¤** - ä½¿ç”¨ LLM ä¿®å¤æ–‡æœ¬ä¸­çš„ä¹±ç å­—ç¬¦ | å¤„ç†ç½‘é¡µå†…å®¹æ—¶ä¿®å¤ç¼–ç é—®é¢˜ | âœ… ä½¿ç”¨ä¸­ |
| `serper-search.ts` | **Google æœç´¢** - ä½¿ç”¨ Serper API è¿›è¡Œ Google æœç´¢ | å¤‡ç”¨æœç´¢å¼•æ“ï¼ˆå½“å‰ä¸»è¦ç”¨ Jina Searchï¼‰ | âœ… ä½¿ç”¨ä¸­ |

### âš ï¸ æœªä½¿ç”¨çš„å·¥å…·

| å·¥å…·æ–‡ä»¶ | åŠŸèƒ½ | ä¸ºä»€ä¹ˆæœªä½¿ç”¨ | å»ºè®® |
|---------|------|-------------|------|
| ~~`dedup.ts`~~ (æ—§ç‰ˆ) | **LLM å»é‡** - ä½¿ç”¨ LLM è¿›è¡Œè¯­ä¹‰å»é‡ | å·²è¢«æ–°ç‰ˆ `dedup.ts` æ›¿ä»£ï¼ˆæ›´å¿«ã€æ›´ä¾¿å®œï¼‰ | âœ… å·²åˆ é™¤ |
| ~~`grounding.ts`~~ | **Google Grounding** - ä½¿ç”¨ Google Gemini çš„ grounding åŠŸèƒ½æœç´¢ | åŠŸèƒ½ä¸ Jina Search é‡å ï¼Œä¸”æˆæœ¬æ›´é«˜ | âœ… å·²åˆ é™¤ |

---

## ğŸ“ è¯¦ç»†åŠŸèƒ½è¯´æ˜

### 1. **dedup.ts** - è¯­ä¹‰å»é‡ï¼ˆæ ¸å¿ƒï¼‰
**åŠŸèƒ½**ï¼šä½¿ç”¨ Jina Embeddings API è®¡ç®—æŸ¥è¯¢ä¹‹é—´çš„è¯­ä¹‰ç›¸ä¼¼åº¦ï¼Œå»é™¤é‡å¤æŸ¥è¯¢
**ç®—æ³•**ï¼š
- ä¸ºæ–°æŸ¥è¯¢å’Œå·²æœ‰æŸ¥è¯¢ç”Ÿæˆå‘é‡åµŒå…¥
- è®¡ç®—ä½™å¼¦ç›¸ä¼¼åº¦
- ç›¸ä¼¼åº¦ >= 0.86 è§†ä¸ºé‡å¤
**ä¼˜åŠ¿**ï¼šæ¯” LLM å»é‡æ›´å¿«ã€æ›´ä¾¿å®œã€æ›´ç¨³å®š

### 2. **jina-rerank.ts** - ç»“æœé‡æ’åº
**åŠŸèƒ½**ï¼šä½¿ç”¨ Jina Reranker API å¯¹æœç´¢ç»“æœæŒ‰ç›¸å…³æ€§é‡æ–°æ’åº
**ç‰¹ç‚¹**ï¼š
- æ”¯æŒæ‰¹å¤„ç†ï¼ˆæ¯æ‰¹ 2000 ä¸ªæ–‡æ¡£ï¼‰
- å¤šè¯­è¨€æ”¯æŒ
- è‡ªåŠ¨é‡è¯•å’Œé”™è¯¯å¤„ç†

### 3. **jina-search.ts** - äº’è”ç½‘æœç´¢
**åŠŸèƒ½**ï¼šä½¿ç”¨ Jina Search API è¿›è¡Œç½‘é¡µæœç´¢ï¼Œè¿”å›æœç´¢ç»“æœæ‘˜è¦
**ç‰¹ç‚¹**ï¼š
- æ— éœ€å†…å®¹æå–ï¼Œç›´æ¥è¿”å›ç»“æ„åŒ–æ•°æ®
- è‡ªåŠ¨ token è¿½è¸ª
- 30ç§’è¶…æ—¶

### 4. **jina-latechunk.ts** - æ™ºèƒ½æ–‡æœ¬æå–
**åŠŸèƒ½**ï¼šä»é•¿æ–‡æœ¬ä¸­æå–ä¸é—®é¢˜æœ€ç›¸å…³çš„ç‰‡æ®µ
**ç®—æ³•**ï¼š
- å°†é•¿æ–‡æœ¬åˆ†å‰²æˆå°å—ï¼ˆchunkï¼‰
- ä½¿ç”¨ late chunking æŠ€æœ¯ç”ŸæˆåµŒå…¥
- è®¡ç®—æ¯ä¸ª chunk ä¸é—®é¢˜çš„ç›¸ä¼¼åº¦
- é€‰æ‹©ç›¸ä¼¼åº¦æœ€é«˜çš„ç‰‡æ®µ
**ç”¨é€”**ï¼šå¤„ç†è¶…é•¿ç½‘é¡µæ—¶é¿å…ä¸Šä¸‹æ–‡æº¢å‡º

### 5. **jina-classify-spam.ts** - åƒåœ¾å†…å®¹è¿‡æ»¤
**åŠŸèƒ½**ï¼šä½¿ç”¨ Jina Classifier API è¯†åˆ«åƒåœ¾å†…å®¹
**ç‰¹ç‚¹**ï¼š
- 5ç§’è¶…æ—¶
- è¿”å›å¸ƒå°”å€¼ï¼ˆæ˜¯å¦ä¸ºåƒåœ¾ï¼‰
- æ”¯æŒè‡ªå®šä¹‰åˆ†ç±»å™¨ ID

### 6. **jina-read.ts** - ç½‘é¡µè¯»å–ï¼ˆæ ¸å¿ƒï¼‰
**åŠŸèƒ½**ï¼šä½¿ç”¨ Jina Reader API æå–ç½‘é¡µçš„ç»“æ„åŒ– Markdown å†…å®¹
**ç‰¹ç‚¹**ï¼š
- å»é™¤å›¾ç‰‡ã€å¹¿å‘Šç­‰æ— å…³å†…å®¹
- è¿”å›çº¯æ–‡æœ¬ Markdown
- å¯é€‰æå–æ‰€æœ‰é“¾æ¥
- 60ç§’è¶…æ—¶

### 7. **jina-segment.ts** - æ–‡æœ¬åˆ†æ®µ
**åŠŸèƒ½**ï¼šä½¿ç”¨ Jina Segment API å°†é•¿æ–‡æœ¬åˆ†å‰²æˆè¯­ä¹‰è¿è´¯çš„å—
**ç‰¹ç‚¹**ï¼š
- æ”¯æŒè¶…å¤§æ–‡æœ¬ï¼ˆè‡ªåŠ¨åˆ†æ‰¹å¤„ç†ï¼‰
- ä¿ç•™æ¯ä¸ª chunk çš„ä½ç½®ä¿¡æ¯
- å¹¶è¡Œå¤„ç†å¤šä¸ªæ‰¹æ¬¡

### 8. **jina-embeddings.ts** - å‘é‡åµŒå…¥ï¼ˆæ ¸å¿ƒï¼‰
**åŠŸèƒ½**ï¼šä½¿ç”¨ Jina Embeddings v3 ç”Ÿæˆæ–‡æœ¬å‘é‡
**ç‰¹ç‚¹**ï¼š
- æ”¯æŒå¤šç§ä»»åŠ¡ç±»å‹ï¼ˆtext-matching, retrieval.passage, retrieval.queryï¼‰
- æ”¯æŒ late chunking
- æ‰¹å¤„ç†ï¼ˆæ¯æ‰¹ 128 ä¸ªæ–‡æœ¬ï¼‰
- è‡ªåŠ¨é‡è¯•ç¼ºå¤±çš„åµŒå…¥

### 9. **build-ref.ts** - å¼•ç”¨æ„å»º
**åŠŸèƒ½**ï¼šä¸ºç­”æ¡ˆæ„å»ºå¼•ç”¨æ ‡æ³¨
**æµç¨‹**ï¼š
1. åˆ†å‰²ç­”æ¡ˆå’Œç½‘é¡µå†…å®¹ä¸º chunks
2. è®¡ç®—ç­”æ¡ˆ chunk å’Œç½‘é¡µ chunk çš„ç›¸ä¼¼åº¦
3. é€‰æ‹©æœ€ç›¸å…³çš„åŒ¹é…
4. åœ¨ç­”æ¡ˆä¸­æ’å…¥å¼•ç”¨æ ‡è®°ï¼ˆ[^1], [^2]ï¼‰
**Fallback**ï¼šå¦‚æœ embedding å¤±è´¥ï¼Œä½¿ç”¨ Jaccard ç›¸ä¼¼åº¦

### 10. **cosine.ts** - ç›¸ä¼¼åº¦è®¡ç®—
**åŠŸèƒ½**ï¼š
- `cosineSimilarity`: è®¡ç®—ä¸¤ä¸ªå‘é‡çš„ä½™å¼¦ç›¸ä¼¼åº¦
- `jaccardRank`: Jaccard ç›¸ä¼¼åº¦æ’åºï¼ˆfallbackï¼‰

### 11. **evaluator.ts** - ç­”æ¡ˆè¯„ä¼°ï¼ˆæ ¸å¿ƒï¼‰
**åŠŸèƒ½**ï¼šå¤šç»´åº¦è¯„ä¼°ç­”æ¡ˆè´¨é‡
**è¯„ä¼°ç±»å‹**ï¼š
- `definitive`: ç­”æ¡ˆæ˜¯å¦æ˜ç¡®
- `freshness`: ç­”æ¡ˆæ˜¯å¦åŒ…å«æœ€æ–°ä¿¡æ¯
- `plurality`: ç­”æ¡ˆæ˜¯å¦å…¨é¢ï¼ˆå¤šè§’åº¦ï¼‰
- `completeness`: ç­”æ¡ˆæ˜¯å¦å®Œæ•´
- `strict`: ä¸¥æ ¼è¯„ä¼°ï¼ˆæœ€æŒ‘å‰”ï¼‰

### 12. **error-analyzer.ts** - é”™è¯¯åˆ†æ
**åŠŸèƒ½**ï¼šåˆ†æå¤±è´¥çš„ç ”ç©¶æ­¥éª¤
**è¾“å‡º**ï¼š
- `recap`: å›é¡¾å…³é”®æ­¥éª¤
- `blame`: æŒ‡å‡ºé—®é¢˜æ ¹æº
- `improvement`: æä¾›æ”¹è¿›å»ºè®®

### 13. **query-rewriter.ts** - æŸ¥è¯¢é‡å†™ï¼ˆæ ¸å¿ƒï¼‰
**åŠŸèƒ½**ï¼šä½¿ç”¨ LLM ä»å¤šä¸ªè®¤çŸ¥è§’åº¦æ‰©å±•å’Œä¼˜åŒ–æœç´¢æŸ¥è¯¢
**7 ä¸ªè®¤çŸ¥è§’è‰²**ï¼š
1. Expert Skepticï¼ˆä¸“å®¶æ€€ç–‘è€…ï¼‰
2. Detail Analystï¼ˆç»†èŠ‚åˆ†æå¸ˆï¼‰
3. Historical Researcherï¼ˆå†å²ç ”ç©¶å‘˜ï¼‰
4. Comparative Thinkerï¼ˆæ¯”è¾ƒæ€è€ƒè€…ï¼‰
5. Temporal Contextï¼ˆæ—¶é—´ä¸Šä¸‹æ–‡ï¼‰
6. Globalizerï¼ˆå…¨çƒåŒ–è€…ï¼‰
7. Reality-Hater-Skepticalistï¼ˆç°å®æ€€ç–‘è€…ï¼‰

### 14. **validator.ts** - ç­”æ¡ˆéªŒè¯
**åŠŸèƒ½**ï¼šå¿«é€ŸéªŒè¯ç­”æ¡ˆæ˜¯å¦æœ‰æ•ˆ
**æ£€æŸ¥é¡¹**ï¼š
- ç©ºå€¼æ£€æŸ¥
- æ— æ•ˆå­—ç¬¦ä¸²ï¼ˆundefined, null, N/Aï¼‰
- é•¿åº¦æ£€æŸ¥ï¼ˆå¤ªçŸ­æˆ–å¤ªé•¿ï¼‰
- åŸå§‹ JSON ç»“æ„æ£€æŸ¥
- é”™è¯¯æ¨¡å¼æ£€æŸ¥
- å®è´¨å†…å®¹æ£€æŸ¥

### 15. **broken-ch-fixer.ts** - ä¹±ç ä¿®å¤
**åŠŸèƒ½**ï¼šä½¿ç”¨ LLM ä¿®å¤æ–‡æœ¬ä¸­çš„ ï¿½ å­—ç¬¦
**æµç¨‹**ï¼š
- æ£€æµ‹ ï¿½ å­—ç¬¦
- æå–ä¸Šä¸‹æ–‡
- ä½¿ç”¨ LLM æ¨æµ‹åŸå§‹æ–‡æœ¬
- è¿­ä»£ä¿®å¤ï¼ˆæœ€å¤š 20 æ¬¡ï¼‰

### 16. **serper-search.ts** - Google æœç´¢
**åŠŸèƒ½**ï¼šä½¿ç”¨ Serper API è¿›è¡Œ Google æœç´¢
**çŠ¶æ€**ï¼šå¤‡ç”¨æœç´¢å¼•æ“ï¼ˆå½“å‰ä¸»è¦ä½¿ç”¨ Jina Searchï¼‰

---

## âš ï¸ é‡å¤åŠŸèƒ½åˆ†æ

### 1. **dedup.ts (æ—§ç‰ˆ LLM) vs dedup.ts (æ–°ç‰ˆ Embeddings)**
- æ—§ç‰ˆ `dedup.ts`: ä½¿ç”¨ LLM è¿›è¡Œè¯­ä¹‰å»é‡
- æ–°ç‰ˆ `dedup.ts`: ä½¿ç”¨ Jina Embeddings è¿›è¡Œè¯­ä¹‰å»é‡
- **ç»“è®º**: æ–°ç‰ˆæ›´å¿«ã€æ›´ä¾¿å®œã€æ›´ç¨³å®šï¼Œå·²æ›¿æ¢æ—§ç‰ˆ

### 2. **grounding.ts vs jina-search.ts**
- `grounding.ts`: ä½¿ç”¨ Google Gemini çš„ grounding åŠŸèƒ½æœç´¢
- `jina-search.ts`: ä½¿ç”¨ Jina Search API æœç´¢
- **ç»“è®º**: åŠŸèƒ½é‡å ï¼Œ`jina-search.ts` å·²ç»è¶³å¤Ÿï¼Œ`grounding.ts` å¯ä»¥åˆ é™¤

---

## ğŸ¯ å»ºè®®

### å·²å®Œæˆæ¸…ç†
1. âœ… ~~`dedup.ts`~~ (æ—§ç‰ˆ LLM) - å·²åˆ é™¤ï¼Œè¢«æ–°ç‰ˆ Embeddings å®ç°æ›¿ä»£
2. âœ… ~~`grounding.ts`~~ - å·²åˆ é™¤ï¼ŒåŠŸèƒ½ä¸ `jina-search.ts` é‡å 

### ä¿ç•™æ‰€æœ‰å…¶ä»–å·¥å…·
æ‰€æœ‰å…¶ä»–å·¥å…·éƒ½åœ¨ç§¯æä½¿ç”¨ä¸­ï¼Œå„å¸å…¶èŒï¼Œä¸åº”åˆ é™¤ã€‚

---

## ğŸ“ˆ å·¥å…·ä¾èµ–å…³ç³»

```
æ ¸å¿ƒæµç¨‹:
â”œâ”€â”€ search action
â”‚   â”œâ”€â”€ query-rewriter.ts (æŸ¥è¯¢ä¼˜åŒ–)
â”‚   â”œâ”€â”€ jina-search.ts / serper-search.ts (æœç´¢)
â”‚   â”œâ”€â”€ jina-rerank.ts (ç»“æœæ’åº)
â”‚   â””â”€â”€ jina-dedup.ts (å»é‡)
â”‚
â”œâ”€â”€ visit action
â”‚   â”œâ”€â”€ jina-read.ts (è¯»å–ç½‘é¡µ)
â”‚   â”œâ”€â”€ jina-latechunk.ts (æå–å…³é”®ç‰‡æ®µ)
â”‚   â”œâ”€â”€ jina-classify-spam.ts (è¿‡æ»¤åƒåœ¾)
â”‚   â””â”€â”€ broken-ch-fixer.ts (ä¿®å¤ä¹±ç )
â”‚
â”œâ”€â”€ answer action
â”‚   â”œâ”€â”€ validator.ts (å¿«é€ŸéªŒè¯)
â”‚   â”œâ”€â”€ build-ref.ts (æ„å»ºå¼•ç”¨)
â”‚   â”‚   â”œâ”€â”€ jina-segment.ts (æ–‡æœ¬åˆ†æ®µ)
â”‚   â”‚   â”œâ”€â”€ jina-embeddings.ts (ç”Ÿæˆå‘é‡)
â”‚   â”‚   â””â”€â”€ cosine.ts (ç›¸ä¼¼åº¦è®¡ç®—)
â”‚   â”œâ”€â”€ evaluator.ts (è¯„ä¼°ç­”æ¡ˆ)
â”‚   â””â”€â”€ error-analyzer.ts (åˆ†æé”™è¯¯)
â”‚
â””â”€â”€ reflect action
    â””â”€â”€ jina-dedup.ts (å»é‡å­é—®é¢˜)
```

---

## ğŸ’¡ æ€»ç»“

**æ€»è®¡**: 15 ä¸ªå·¥å…·æ–‡ä»¶ï¼ˆå·²æ¸…ç†ï¼‰
- âœ… **15 ä¸ªæ­£åœ¨ä½¿ç”¨** - åŠŸèƒ½å®Œæ•´ï¼Œå„å¸å…¶èŒ
- âœ… **2 ä¸ªå·²åˆ é™¤** - æ—§ç‰ˆ dedup.ts (LLMå»é‡) å’Œ grounding.ts

æ‰€æœ‰æ­£åœ¨ä½¿ç”¨çš„å·¥å…·éƒ½æ˜¯å¿…è¦çš„ï¼Œå½¢æˆäº†ä¸€ä¸ªå®Œæ•´çš„ç ”ç©¶ä»£ç†å·¥å…·é“¾ã€‚

**æ–‡ä»¶å‘½åè§„èŒƒ**ï¼š
- å¸¦ `jina-` å‰ç¼€ï¼šæ‰€æœ‰ä½¿ç”¨ Jina API çš„å·¥å…·ï¼ˆä¿æŒä¸€è‡´æ€§ï¼‰
- ä¸å¸¦å‰ç¼€ï¼šä¸ä¾èµ– Jina çš„é€šç”¨å·¥å…·ï¼ˆcosine, validator, evaluator, error-analyzer, query-rewriter, broken-ch-fixer, serper-search, build-refï¼‰

